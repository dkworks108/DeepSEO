<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DeepSEO Content Generator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        /* Custom scrollbar for better aesthetics */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb {
            background: #888;
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #555;
        }
        body {
            font-family: 'Inter', sans-serif;
            /* Subtle gradient background for a more appealing UI */
            background: linear-gradient(to bottom right, #e0f2fe, #eef2ff); /* Light blue to very light purple */
        }
        /* Message box styling for notifications */
        .message-box {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background-color: #333;
            color: white;
            padding: 10px 20px;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            z-index: 1000;
            opacity: 0;
            transition: opacity 0.3s ease-in-out;
        }
        .message-box.show {
            opacity: 1;
        }
        /* Styling for the contenteditable area to look like an editor */
        #output-editor {
            min-height: 200px;
            max-height: 600px;
            overflow-y: auto;
            border: 1px solid #e2e8f0; /* gray-200 */
            border-radius: 0.375rem; /* rounded-md */
            padding: 1.5rem; /* p-6 */
            background-color: #f9fafb; /* gray-50 */
            line-height: 1.6;
            outline: none; /* Remove default focus outline */
            transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;
        }
        #output-editor:focus {
            border-color: #6366f1; /* indigo-500 */
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.2); /* ring-indigo-500 with opacity */
        }
        /* Hide the editor controls by default */
        #editor-controls-container.hidden {
            display: none;
        }
        /* Editor button base style */
        .editor-btn {
            @apply p-2 rounded-md bg-gray-200 hover:bg-gray-300 text-gray-800 font-semibold text-sm transition duration-150 ease-in-out;
        }
        .editor-btn.active {
            @apply bg-indigo-300; /* Active state color */
        }
        .editor-btn:disabled {
            @apply opacity-50 cursor-not-allowed;
        }
        /* Color input styling */
        .color-input {
            @apply p-1 rounded-md bg-gray-200 cursor-pointer;
            width: 40px; /* Adjust width for color input */
            height: 36px; /* Match button height */
        }

        /* Modal specific styles */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.6);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 2000;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease-in-out, visibility 0.3s ease-in-out;
        }
        .modal-overlay.show {
            opacity: 1;
            visibility: visible;
        }
        .modal-content {
            background-color: white;
            padding: 2rem;
            border-radius: 0.75rem;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
            max-width: 90%;
            width: 450px;
            transform: translateY(-20px);
            transition: transform 0.3s ease-in-out;
            position: relative;
        }
        .modal-overlay.show .modal-content {
            transform: translateY(0);
        }
        .close-button {
            position: absolute;
            top: 10px;
            right: 10px;
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: #666;
        }
        .share-option {
            @apply flex items-center p-3 my-2 rounded-md bg-gray-100 hover:bg-gray-200 transition duration-150 ease-in-out cursor-pointer;
        }
        .share-option i {
            margin-right: 10px;
            font-size: 1.2rem;
        }

        /* Progress bar styling */
        .progress-bar-container {
            width: 100%;
            background-color: #e0e0e0;
            border-radius: 5px;
            overflow: hidden;
            margin-top: 10px;
            box-shadow: inset 0 1px 3px rgba(0,0,0,0.2); /* Inner shadow for depth */
        }
        .progress-bar {
            height: 20px;
            width: 0%;
            background: linear-gradient(to right, #6366f1, #8b5cf6); /* Indigo to Violet gradient */
            border-radius: 5px;
            text-align: center;
            color: white;
            line-height: 20px;
            transition: width 0.5s ease-in-out, background 0.5s ease-in-out; /* Smooth transition for background */
            font-weight: bold;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.3); /* Text shadow for better readability */
            position: relative;
            overflow: hidden;
        }
        .progress-bar::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255,255,255,0.1);
            transform: translateX(-100%);
            animation: progress-stripes 2s linear infinite;
            border-radius: 5px;
        }

        @keyframes progress-stripes {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        /* Error spinner color */
        #loading-indicator.error .animate-spin {
            border-color: #dc2626; /* Red-600 for error */
            border-top-color: transparent;
        }
    </style>
</head>
<body class="bg-gray-100 text-gray-800 flex flex-col min-h-screen">
    <div class="container mx-auto p-4 md:p-8 flex-grow">

        <section id="upper-section" class="bg-white p-6 md:p-8 rounded-lg shadow-xl mb-8 border border-gray-200">
            <h1 class="text-3xl md:text-4xl font-bold text-center mb-6 text-indigo-700">DeepSEO Content Generator</h1>
            <p class="text-center text-gray-600 mb-8">Enter your content requirements below and let DeepSEO do the magic!</p>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
    
                <div>
                    <label for="topic-input" class="block text-sm font-medium text-gray-700 mb-2">Topic / Information:</label>
                    <input type="text" id="topic-input" placeholder="e.g., 'Benefits of AI in Healthcare' or 'Show writing styles and tones'"
                           class="w-full p-3 border border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500 shadow-sm transition duration-150 ease-in-out">
                </div>

                <div>
                    <label for="article-title-input" class="block text-sm font-medium text-gray-700 mb-2">Main Article Title (H1) (Optional):</label>
                    <input type="text" id="article-title-input" placeholder="e.g., 'Unlocking Wellness: The Myriad Benefits of Yoga'"
                           class="w-full p-3 border border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500 shadow-sm transition duration-150 ease-in-out">
                </div>

                <div>
                    <label for="word-length-select" class="block text-sm font-medium text-gray-700 mb-2">Content Length:</label>
                    <select id="word-length-select"
                            class="w-full p-3 border border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500 shadow-sm transition duration-150 ease-in-out cursor-pointer">
                        <option value="very-small">Very Small (150-300 words)</option>
                        <option value="small">Small (300-500 words)</option>
                        <option value="medium">Medium (500-800 words)</option>
                        <option value="large">Large (800-1500 words)</option>
                        <option value="very-large">Very Large (1500-2500 words)</option>
                    </select>
                    <input type="hidden" id="word-limit-hidden" value="800"> </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Content Format:</label>
                    <div class="flex flex-wrap gap-2">
                        <label class="inline-flex items-center">
                            <input type="radio" name="content-format" value="blog" class="form-radio text-indigo-600" checked>
                            <span class="ml-2 text-gray-700">Blog Post</span>
                        </label>
                        <label class="inline-flex items-center">
                            <input type="radio" name="content-format" value="article" class="form-radio text-indigo-600">
                            <span class="ml-2 text-gray-700">Article</span>
                        </label>
                        <label class="inline-flex items-center">
                            <input type="radio" name="content-format" value="paragraph" class="form-radio text-indigo-600">
                            <span class="ml-2 text-gray-700">Paragraph</span>
                        </label>
                        <label class="inline-flex items-center">
                            <input type="radio" name="content-format" value="research-paper" class="form-radio text-indigo-600">
                            <span class="ml-2 text-gray-700">Research Paper (Formal)</span>
                        </label>
                        <label class="inline-flex items-center">
                            <input type="radio" name="content-format" value="product-description" class="form-radio text-indigo-600">
                            <span class="ml-2 text-gray-700">Product Description</span>
                        </label>
                        <label class="inline-flex items-center">
                            <input type="radio" name="content-format" value="social-media-post" class="form-radio text-indigo-600">
                            <span class="ml-2 text-gray-700">Social Media Post</span>
                        </label>
                        <label class="inline-flex items-center">
                            <input type="radio" name="content-format" value="email-newsletter" class="form-radio text-indigo-600">
                            <span class="ml-2 text-gray-700">Email Newsletter</span>
                        </label>
                        <label class="inline-flex items-center">
                            <input type="radio" name="content-format" value="faq-section" class="form-radio text-indigo-600">
                            <span class="ml-2 text-gray-700">FAQ Section</span>
                        </label>
                    </div>
                </div>

                <div>
                    <label for="link-density-select" class="block text-sm font-medium text-gray-700 mb-2">Link Density Level:</label>
                    <select id="link-density-select"
                            class="w-full p-3 border border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500 shadow-sm transition duration-150 ease-in-out cursor-pointer">
                        <option value="normal">Normal (SEO-friendly)</option>
                        <option value="none">None (No Links)</option>
                        <option value="minimal">Minimal (Very Few)</option>
                        <option value="more">More Links (Gray Hat)</option>
                        <option value="spammy">Spammy (High Density)</option>
                    </select>
                </div>

                <div>
                    <label for="writing-style-tone-select" class="block text-sm font-medium text-gray-700 mb-2">Top Writing Style & Tone:</label>
                    <select id="writing-style-tone-select"
                            class="w-full p-3 border border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500 shadow-sm transition duration-150 ease-in-out cursor-pointer">
                        <option value="Informative">Informative: Factual, objective (Blogs, guides)</option>
                        <option value="Conversational">Conversational: Friendly, casual, human (Blogs, newsletters)</option>
                        <option value="Educational">Educational: Teach, explain step-by-step (eLearning, tutorials)</option>
                        <option value="Formal/Professional">Formal/Professional: Objective, structured (Reports, B2B)</option>
                        <option value="Persuasive">Persuasive: Influence, convince (Sales pages, ads)</option>
                        <option value="Narrative">Narrative: Tells a story (Blogs, brand storytelling)</option>
                        <option value="Descriptive">Descriptive: Detailed imagery (Product descriptions)</option>
                        <option value="Analytical">Analytical: Breaks down data, reasoning (Market reports)</option>
                        <option value="Technical">Technical: Precise, jargon-heavy (Manuals, APIs)</option>
                        <option value="Expository">Expository: Explains concepts neutrally (Encyclopedias)</option>
                    </select>
                </div>

                <div class="md:col-span-2">
                    <label for="keywords-input" class="block text-sm font-medium text-gray-700 mb-2">Primary & LSI Keywords (comma-separated):</label>
                    <textarea id="keywords-input" rows="4" placeholder="e.g., 'AI, healthcare innovation, medical technology, patient care solutions'"
                              class="w-full p-3 border border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500 shadow-sm transition duration-150 ease-in-out"></textarea>
                </div>

                <div class="md:col-span-2">
                    <label for="external-links-input" class="block text-sm font-medium text-gray-700 mb-2">External Links (one per line, will be bolded & clickable if used):</label>
                    <textarea id="external-links-input" rows="4" placeholder="e.g.,
https://goyalstech.com/
https://goyalstech.com/services/web-development
https://goyalstech.com/services/seo-optimization"
                              class="w-full p-3 border border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500 shadow-sm transition duration-150 ease-in-out"></textarea>
                </div>
            </div>

            <div class="flex justify-center mt-8">
                <button id="generate-button"
                        class="bg-indigo-600 hover:bg-indigo-700 text-white font-semibold py-3 px-8 rounded-full shadow-lg transform hover:scale-105 transition duration-300 ease-in-out focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2">
                    Generate DeepSEO Content
                </button>
            </div>
        </section>

        <section id="lower-section" class="bg-white p-6 md:p-8 rounded-lg shadow-xl border border-gray-200">
            <h2 class="text-2xl md:text-3xl font-bold text-center mb-6 text-indigo-700">DeepSEO Output</h2>
            <div id="loading-indicator" class="hidden text-center text-gray-500 mb-4">
                <div class="animate-spin inline-block w-8 h-8 border-4 border-indigo-500 border-t-transparent rounded-full" role="status">
                    <span class="sr-only">Loading...</span>
                </div>
                <p class="mt-2" id="loading-message">Initializing...</p>
                <div class="progress-bar-container mt-2">
                    <div class="progress-bar" id="progress-bar-fill">0%</div>
                </div>
            </div>

            <div id="editor-controls-container" class="hidden">
                <div class="flex flex-wrap gap-2 p-3 bg-gray-100 rounded-t-md border border-gray-200 border-b-0 mb-0.5">
                    <button type="button" data-command="bold" class="editor-btn" title="Bold"><i class="fas fa-bold"></i></button>
                    <button type="button" data-command="italic" class="editor-btn" title="Italic"><i class="fas fa-italic"></i></button>
                    <button type="button" data-command="underline" class="editor-btn" title="Underline"><i class="fas fa-underline"></i></button>
                    <button type="button" data-command="strikeThrough" class="editor-btn" title="Strikethrough"><i class="fas fa-strikethrough"></i></button>

                    <button type="button" data-command="formatBlock" data-value="h2" class="editor-btn" title="Heading 2">H2</button>
                    <button type="button" data-command="formatBlock" data-value="h3" class="editor-btn" title="Heading 3">H3</button>
                    <button type="button" data-command="formatBlock" data-value="p" class="editor-btn" title="Paragraph">P</button>

                    <select id="font-size-select" class="p-2 rounded-md bg-gray-200 hover:bg-gray-300 text-gray-800 font-semibold text-sm cursor-pointer" title="Font Size">
                        <option value="">Size</option>
                        <option value="1">Small</option>
                        <option value="2">Normal</option>
                        <option value="3">Medium</option>
                        <option value="4">Large</option>
                        <option value="5">Larger</option>
                        <option value="6">Huge</option>
                        <option value="7">Giant</option>
                    </select>

                    <select id="font-family-select" class="p-2 rounded-md bg-gray-200 hover:bg-gray-300 text-gray-800 font-semibold text-sm cursor-pointer" title="Font Family">
                        <option value="">Font</option>
                        <option value="Arial">Arial</option>
                        <option value="Verdana">Verdana</option>
                        <option value="Times New Roman">Times New Roman</option>
                        <option value="Georgia">Georgia</option>
                        <option value="Courier New">Courier New</option>
                        <option value="Inter, sans-serif">Inter</option>
                    </select>

                    <input type="color" id="text-color-input" class="color-input" value="#000000" title="Text Color">
                    <input type="color" id="background-color-input" class="color-input" value="#ffffff" title="Highlight Color">

                    <button type="button" id="uppercase-btn" class="editor-btn" title="Uppercase Selected Text">Aa <i class="fas fa-arrow-up"></i></button>
                    <button type="button" id="lowercase-btn" class="editor-btn" title="Lowercase Selected Text">aA <i class="fas fa-arrow-down"></i></button>

                    <button type="button" data-command="justifyLeft" class="editor-btn" title="Align Left"><i class="fas fa-align-left"></i></button>
                    <button type="button" data-command="justifyCenter" class="editor-btn" title="Align Center"><i class="fas fa-align-center"></i></button>
                    <button type="button" data-command="justifyRight" class="editor-btn" title="Align Right"><i class="fas fa-align-right"></i></button>
                    <button type="button" data-command="justifyFull" class="editor-btn" title="Justify"><i class="fas fa-align-justify"></i></button>

                    <button type="button" data-command="insertUnorderedList" class="editor-btn" title="Bullet List"><i class="fas fa-list-ul"></i></button>
                    <button type="button" data-command="insertOrderedList" class="editor-btn" title="Numbered List"><i class="fas fa-list-ol"></i></button>

                    <button type="button" data-command="undo" class="editor-btn" title="Undo"><i class="fas fa-undo"></i></button>
                    <button type="button" data-command="redo" class="editor-btn" title="Redo"><i class="fas fa-redo"></i></button>

                    <button type="button" id="insert-link-btn" class="editor-btn" title="Insert Link"><i class="fas fa-link"></i></button>
                    <button type="button" id="insert-image-btn" class="editor-btn" title="Insert Image"><i class="fas fa-image"></i></button>
                    <button type="button" id="insert-table-btn" class="editor-btn" title="Insert Table"><i class="fas fa-table"></i></button>

                </div>

                <div id="output-editor" contenteditable="true" class="bg-gray-50 p-4 md:p-6 rounded-b-md text-gray-700 leading-relaxed text-base">
                    Your generated DeepSEO content will appear here and can be edited.
                </div>
            </div>


            <div class="flex justify-center gap-4 mt-6">
                <button id="copy-button"
                        class="bg-gray-200 hover:bg-gray-300 text-gray-800 font-semibold py-2 px-6 rounded-full shadow-md transform hover:scale-105 transition duration-300 ease-in-out focus:outline-none focus:ring-2 focus:ring-gray-400 focus:ring-offset-2" disabled style="display: none;">
                    Copy Text
                </button>
                <button id="share-button"
                        class="bg-blue-500 hover:bg-blue-600 text-white font-semibold py-2 px-6 rounded-full shadow-md transform hover:scale-105 transition duration-300 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-400 focus:ring-offset-2" disabled style="display: none;">
                    Share
                </button>
            </div>
        </section>
    </div>

    <footer class="bg-gray-800 text-white text-center p-4 mt-8">
        <p>&copy; 2025 DeepSEO. All rights reserved.</p>
    </footer>

    <div id="message-box" class="message-box"></div>

    <div id="share-modal-overlay" class="modal-overlay">
        <div class="modal-content">
            <button id="close-share-modal" class="close-button">&times;</button>
            <h3 class="text-2xl font-bold text-center mb-6 text-indigo-700">Share Your Content</h3>
            <div class="flex flex-col gap-3">
                <div class="share-option" data-platform="whatsapp">
                    <i class="fab fa-whatsapp text-green-500"></i> Share on WhatsApp
                </div>
                <div class="share-option" data-platform="twitter">
                    <i class="fab fa-twitter text-blue-400"></i> Share on Twitter
                </div>
                <div class="share-option" data-platform="linkedin">
                    <i class="fab fa-linkedin text-blue-700"></i> Share on LinkedIn
                </div>
                <div class="share-option" data-platform="email">
                    <i class="fas fa-envelope text-gray-600"></i> Share via Email
                </div>
            </div>
        </div>
    </div>

    <script type="module">
        // Mapping for word length options to actual word limits
        const wordLengthMap = {
            'very-small': { min: 150, max: 300, target: 225 },
            'small': { min: 300, max: 500, target: 400 },
            'medium': { min: 500, max: 800, target: 650 },
            'large': { min: 800, max: 1500, target: 1200 },
            'very-large': { min: 1500, max: 2500, target: 2000 }
        };
        // Mapping for writing styles/tones to their descriptions and structures
        const writingStyleToneMap = new Map([
            ['Informative', {
                description: 'Provides useful, factual content; objective tone.',
                structure: 'Title → Introduction → Subheadings → Bullet Points/Lists → Conclusion/CTA'
            }],
            ['Conversational', {
                description: 'Friendly, casual, human-sounding writing.',
                structure: 'Hook → Story or Question → Main Points → Light Humor/Examples → CTA'
            }],
            ['Educational', {
                description: 'Designed to teach or explain something step-by-step.',
                structure: 'Definition → Explanation → Examples → Summary/Exercise/Quiz'
            }],
            ['Formal/Professional', {
                description: 'Objective, structured, business-like.',
                structure: 'Executive Summary → Sections → Data/Stats → Formal Conclusion'
            }],
            ['Persuasive', {
                description: 'Tries to influence or convince the reader.',
                structure: 'Problem → Agitate → Solution → Benefits → CTA'
            }],
            ['Narrative', {
                description: 'Tells a story; often personal or brand-driven.',
                structure: 'Setup → Conflict → Resolution → Moral/CTA'
            }],
            ['Descriptive', {
                description: 'Focuses on detailed imagery or descriptions.',
                structure: 'Sensory Language → Metaphors → Features → Emotional Hook'
            }],
            ['Analytical', {
                description: 'Breaks down data or trends with reasoning.',
                structure: 'Thesis → Evidence → Breakdown → Conclusion'
            }],
            ['Technical', {
                description: 'Precise, jargon-heavy, instructional tone.',
                structure: 'Introduction → Requirements → Step-by-Step Instructions → Troubleshooting'
            }],
            ['Expository', {
                description: 'Explains concepts or ideas neutrally.',
                structure: 'Topic → Clear Definitions → Logical Sections → Summary'
            }]
        ]);
        // Get references to the input elements and the output display area
        const topicInput = document.getElementById('topic-input');
        const articleTitleInput = document.getElementById('article-title-input');
        const wordLengthSelect = document.getElementById('word-length-select');
        const wordLimitHidden = document.getElementById('word-limit-hidden');
        const contentFormatRadios = document.querySelectorAll('input[name="content-format"]');
        const linkDensitySelect = document.getElementById('link-density-select');
        const writingStyleToneSelect = document.getElementById('writing-style-tone-select');
        const keywordsInput = document.getElementById('keywords-input');
        const externalLinksInput = document.getElementById('external-links-input');
        const generateButton = document.getElementById('generate-button');
        const outputEditor = document.getElementById('output-editor');
        const loadingIndicator = document.getElementById('loading-indicator');
        const loadingMessage = document.getElementById('loading-message');
        const progressBarFill = document.getElementById('progress-bar-fill');
        const copyButton = document.getElementById('copy-button');
        const shareButton = document.getElementById('share-button');
        const editorControlsContainer = document.getElementById('editor-controls-container');
        const messageBox = document.getElementById('message-box');

        // Get references to editor buttons and selects
        const editorButtons = document.querySelectorAll('.editor-btn[data-command]');
        const fontSizeSelect = document.getElementById('font-size-select');
        const fontFamilySelect = document.getElementById('font-family-select');
        const textColorInput = document.getElementById('text-color-input');
        const backgroundColorInput = document.getElementById('background-color-input');
        const uppercaseBtn = document.getElementById('uppercase-btn');
        const lowercaseBtn = document.getElementById('lowercase-btn');
        const insertLinkBtn = document.getElementById('insert-link-btn');
        const insertImageBtn = document.getElementById('insert-image-btn');
        const insertTableBtn = document.getElementById('insert-table-btn');
        // Share Modal elements
        const shareModalOverlay = document.getElementById('share-modal-overlay');
        const closeShareModalBtn = document.getElementById('close-share-modal');
        const shareOptions = document.querySelectorAll('.share-option');

        // Function to display messages to the user
        function showMessage(message, duration = 3000) {
            if (messageBox) { // Ensure messageBox is defined
                messageBox.textContent = message;
                messageBox.classList.add('show');
                setTimeout(() => {
                    messageBox.classList.remove('show');
                }, duration);
            } else {
                console.error("Message box element not found!");
            }
        }

        // Function to update the loading bar and message
        function updateProgressBar(percentage, message) {
            if (progressBarFill && loadingMessage && loadingIndicator) { // Ensure elements are defined
                progressBarFill.style.width = `${percentage}%`;
                progressBarFill.textContent = `${percentage}%`;
                loadingMessage.textContent = message;
                if (percentage === 0) {
                    loadingIndicator.classList.remove('hidden');
                } else if (percentage === 100) {
                    setTimeout(() => {
                        loadingIndicator.classList.add('hidden');
                    }, 500); // Keep full bar for a moment
                }
            } else {
                console.error("Progress bar elements not found!");
            }
        }

        // Function to gradually update the progress bar
        function animateProgressBar(start, end, duration, message) {
            let startTime = null;
            const animateStep = (currentTime) => {
                if (!startTime) startTime = currentTime;
                const progress = (currentTime - startTime) / duration;
                const currentPercentage = start + (end - start) * progress;
                if (currentPercentage < end) {
                    updateProgressBar(Math.floor(currentPercentage), message);
                    requestAnimationFrame(animateStep);
                } else {
                    updateProgressBar(end, message);
                }
            };
            requestAnimationFrame(animateStep);
        }

        // Function to execute editor commands (bold, italic, underline, etc.)
        function executeCommand(command, value = null) {
            document.execCommand(command, false, value);
            outputEditor.focus(); // Keep focus on the editor after command
            // Add temporary active state for buttons that don't auto-toggle (excluding undo/redo/insert types)
            const button = document.querySelector(`.editor-btn[data-command="${command}"][data-value="${value}"]`) ||
                document.querySelector(`.editor-btn[data-command="${command}"]`);
            if (button && !['undo', 'redo', 'createLink', 'insertHTML'].includes(command)) {
                button.classList.add('active');
                setTimeout(() => {
                    button.classList.remove('active');
                }, 200); // Short highlight duration
            }
        }

        // Event listeners for editor buttons (data-command based)
        editorButtons.forEach(button => {
            button.addEventListener('click', () => {
                const command = button.dataset.command;
                const value = button.dataset.value;
                executeCommand(command, value);
            });
        });
        // Event listener for font size select
        fontSizeSelect.addEventListener('change', (event) => {
            const size = event.target.value;
            if (size) {
                executeCommand('fontSize', size);
            }
        });
        // Event listener for font family select
        fontFamilySelect.addEventListener('change', (event) => {
            const font = event.target.value;
            if (font) {
                executeCommand('fontName', font);
            }
        });
        // Event listener for text color input
        textColorInput.addEventListener('input', (event) => {
            const color = event.target.value;
            executeCommand('foreColor', color);
        });
        // Event listener for background color input
        backgroundColorInput.addEventListener('input', (event) => {
            const color = event.target.value;
            executeCommand('backColor', color);
        });
        // Function to convert selected text to uppercase
        uppercaseBtn.addEventListener('click', () => {
            const selection = window.getSelection();
            if (!selection.rangeCount || selection.isCollapsed) {
                showMessage('Select text to convert to uppercase.');
                return;
            }
            const range = selection.getRangeAt(0);
            const selectedText = range.toString();
            if (selectedText) {
                const newText = document.createTextNode(selectedText.toUpperCase());
                range.deleteContents();
                range.insertNode(newText);
                showMessage('Text converted to uppercase.');
                outputEditor.focus();
            } else {
                showMessage('Select text to convert to uppercase.');
            }
        });
        // Function to convert selected text to lowercase
        lowercaseBtn.addEventListener('click', () => {
            const selection = window.getSelection();
            if (!selection.rangeCount || selection.isCollapsed) {
                showMessage('Select text to convert to lowercase.');
                return;
            }
            const range = selection.getRangeAt(0);
            const selectedText = range.toString();
            if (selectedText) {
                const newText = document.createTextNode(selectedText.toLowerCase());
                range.deleteContents();
                range.insertNode(newText);
                showMessage('Text converted to lowercase.');
                outputEditor.focus();
            } else {
                showMessage('Select text to convert to lowercase.');
            }
        });
        // Function to insert a link
        insertLinkBtn.addEventListener('click', () => {
            const url = prompt('Enter the URL for the link:');
            if (url) {
                const selection = window.getSelection();
                if (selection.isCollapsed) {
                    executeCommand('insertHTML', `<a href="${url}" target="_blank" rel="noopener noreferrer">${url}</a>`);
                } else {
                    executeCommand('createLink', url);
                }
                showMessage('Link inserted.');
            }
            insertLinkBtn.classList.add('active');
            setTimeout(() => insertLinkBtn.classList.remove('active'), 200);
        });
        // Function to insert an image
        insertImageBtn.addEventListener('click', () => {
            const imageUrl = prompt('Enter the image URL:');
            if (imageUrl) {
                const altText = prompt('Enter alt text for the image (important for SEO and accessibility):', '');
                const imgHtml = `<img src="${imageUrl}" alt="${altText}" style="max-width:100%; height:auto; display: block; margin: 1em auto; border-radius: 8px;" onerror="this.onerror=null;this.src='https://placehold.co/150x100/E0E0E0/6C6C6C?text=Image+Error'; this.alt='Image failed to load';">`;
                executeCommand('insertHTML', imgHtml);
                showMessage('Image inserted. (Note: Image must be publicly publicly accessible)');
            }
            insertImageBtn.classList.add('active');
            setTimeout(() => insertImageBtn.classList.remove('active'), 200);
        });

        // Function to insert a table
        insertTableBtn.addEventListener('click', () => {
            const rows = prompt('Enter number of rows (e.g., 3):', '3');
            const cols = prompt('Enter number of columns (e.g., 3):', '3');

            if (rows && cols && !isNaN(rows) && !isNaN(cols) && parseInt(rows) > 0 && parseInt(cols) > 0) {
                let tableHtml = '<table style="width:100%; border-collapse: collapse; margin: 1em 0;">';
                tableHtml += '<thead><tr>';
                for (let i = 0; i < parseInt(cols); i++) {
                    tableHtml += '<th style="border: 1px solid #ccc; padding: 8px; text-align: left; background-color: #f2f2f2;">Header ' + (i + 1) + '</th>';
                }
                tableHtml += '</tr></thead><tbody>';
                for (let r = 0; r < parseInt(rows); r++) {
                    tableHtml += '<tr>';
                    for (let c = 0; c < parseInt(cols); c++) {
                        tableHtml += '<td style="border: 1px solid #ccc; padding: 8px;">Cell ' + (r + 1) + '-' + (c + 1) + '</td>';
                    }
                    tableHtml += '</tr>';
                }
                tableHtml += '</tbody></table>';
                executeCommand('insertHTML', tableHtml);
                showMessage('Table inserted.');
            } else {
                showMessage('Please enter valid numbers for rows and columns.');
            }
            insertTableBtn.classList.add('active');
            setTimeout(() => insertTableBtn.classList.remove('active'), 200);
        });

        // Function to convert Markdown to HTML (and handle HTML links within Markdown)
        function markdownToHtml(markdown) {
            let html = markdown;

            // Convert headings (H1, H2, H3)
            html = html.replace(/^### (.*)$/gm, '<h3>$1</h3>');
            html = html.replace(/^## (.*)$/gm, '<h2>$1</h2>');
            html = html.replace(/^# (.*)$/gm, '<h1>$1</h1>');

            // Convert bold text (before links to avoid conflicts)
            html = html.replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>');
            // Convert Markdown links: [Link Text](URL) to <a href="URL" target="_blank" rel="noopener noreferrer">Link Text</a>
            html = html.replace(/\[(.*?)\]\((.*?)\)/g, '<a href="$2" target="_blank" rel="noopener noreferrer">$1</a>');
            // Handle tables generated by AI using Markdown table syntax
            const tableRegex = /^(?:\|(.+)\|)\n(?:\|(?:[-:]+)\|)+\n((?:\|.*\|(?:\n|$))+)/gm;
            html = html.replace(tableRegex, (match, headerLine, bodyLines) => {
                const headers = headerLine.split('|').map(h => h.trim()).filter(h => h !== '');
                let tableHtml = '<table class="w-full border-collapse my-4">';
                tableHtml += '<thead><tr>';
                headers.forEach(header => {
                    tableHtml += `<th class="border border-gray-300 p-2 text-left bg-gray-100">${header}</th>`;
                });
                tableHtml += '</tr></thead><tbody>';

                const rows = bodyLines.split('\n').map(row => row.trim()).filter(row => row !== '');
                rows.forEach(row => {
                    const cells = row.split('|').map(c => c.trim()).filter(c => c !== '');
                    tableHtml += '<tr>';
                    cells.forEach(cell => {
                        tableHtml += `<td class="border border-gray-300 p-2">${cell}</td>`;
                    });
                    tableHtml += '</tr>';
                });
                tableHtml += '</tbody></table>';
                return tableHtml;
            });

            // Convert paragraphs (lines separated by two or more newlines into <p> tags)
            html = html.replace(/(\r?\n){2,}/g, '</p><p>');
            html = `<p>${html}</p>`;
            // Prevent <p> tags around existing block-level HTML elements
            html = html.replace(/<p>\s*<(h[1-6]|ul|ol|table|div|img|a|strong|em|u|strike)>/g, '<$1>');
            html = html.replace(/<\/(h[1-6]|ul|ol|table|div|img|a|strong|em|u|strike)>\s*<\/p>/g, '</$1>');
            html = html.replace(/<p>\s*<\/p>/g, ''); // Remove any remaining empty paragraphs
            html = html.replace(/\r?\n/g, '<br>'); // Convert remaining single newlines to <br> for line breaks

            return html;
        }


        // Function to generate content using the Gemini API
        async function generateDeepSEOContent() {
            // Reset UI and disable/hide buttons
            updateProgressBar(0, 'Initializing content generation...');
            outputEditor.textContent = ''; // Clear previous output
            editorControlsContainer.classList.add('hidden'); // Hide editor controls
            generateButton.disabled = true;
            copyButton.disabled = true;
            shareButton.disabled = true;
            copyButton.style.display = 'none'; // Hide copy button
            shareButton.style.display = 'none'; // Hide share button

            // Ensure loading indicator is not in error state at the start of a new generation
            loadingIndicator.classList.remove('error');


            const topic = topicInput.value.trim();
            const articleTitle = articleTitleInput.value.trim();
            const selectedWordLength = wordLengthSelect.value;
            const wordLimitInfo = wordLengthMap[selectedWordLength];

            let wordCountRange = `${wordLimitInfo.min}-${wordLimitInfo.max} words`;
            let targetWordCount = wordLimitInfo.target;

            const selectedContentFormat = document.querySelector('input[name="content-format"]:checked').value;
            const selectedLinkDensity = linkDensitySelect.value;
            const selectedWritingStyleTone = writingStyleToneSelect.value;
            const keywords = keywordsInput.value.trim();
            const externalLinks = externalLinksInput.value.trim();

            const styleToneInfo = writingStyleToneMap.get(selectedWritingStyleTone);
            const styleDescription = styleToneInfo ? styleToneInfo.description : '';
            const styleStructure = styleToneInfo ? styleToneInfo.structure : '';

            let promptContent = '';
            if (topic.toLowerCase() === "show writing styles and tones") {
                promptContent = `As a professional human content editor and SEO specialist, generate a detailed Markdown table outlining different writing styles and tones.
                The table should have the following columns: "Rank", "Style/Tone", "Description", "Where It's Commonly Used", and "General Format Structure".
                For the "General Format Structure" column, use arrows (→) or bullet points to indicate the sequence or flow of sections.
                The descriptions should be concise, clear, and aligned with common industry understanding.
                Do not include emojis or symbols in the output, only numeric ranking.
                Populate the table with the following writing styles and their details:
                - Style/Tone: Informative
                  Description: Provides useful, factual content; objective tone.
                  Commonly Used: Blogs, guides, how-tos, SEO content
                  General Format Structure: Title → Introduction → Subheadings → Bullet Points/Lists → Conclusion/CTA
                - Style/Tone: Conversational
                  Description: Friendly, casual, human-sounding writing.
                  Commonly Used: Blogs, newsletters, marketing content
                  General Format Structure: Hook → Story or Question → Main Points → Light Humor/Examples → CTA
                - Style/Tone: Educational
                  Description: Designed to teach or explain something step-by-step.
                  Commonly Used: eLearning, tutorials, explainer blogs
                  General Format Structure: Definition → Explanation → Examples → Summary/Exercise/Quiz
                - Style/Tone: Formal/Professional
                  Description: Objective, structured, business-like.
                  Commonly Used: Reports, whitepapers, B2B, academic
                  General Format Structure: Executive Summary → Sections → Data/Stats → Formal Conclusion
                - Style/Tone: Persuasive
                  Description: Tries to influence or convince the reader.
                  Commonly Used: Sales pages, ads, landing pages
                  General Format Structure: Problem → Agitate → Solution → Benefits → CTA
                - Style/Tone: Narrative
                  Description: Tells a story; often personal or brand-driven.
                  Commonly Used: Blogs, brand storytelling, speeches
                  General Format Structure: Setup → Conflict → Resolution → Moral/CTA
                - Style/Tone: Descriptive
                  Description: Focuses on detailed imagery or descriptions.
                  Commonly Used: Product descriptions, creative writing
                  General Format Structure: Sensory Language → Metaphors → Features → Emotional Hook
                - Style/Tone: Analytical
                  Description: Breaks down data or trends with reasoning.
                  Commonly Used: Market reports, case studies, essays
                  General Format Structure: Thesis → Evidence → Breakdown → Conclusion
                - Style/Tone: Technical
                  Description: Precise, jargon-heavy, instructional tone.
                  Commonly Used: Manuals, software docs, APIs
                  General Format Structure: Introduction → Requirements → Step-by-Step Instructions → Troubleshooting
                - Style/Tone: Expository
                  Description: Explains concepts or ideas neutrally.
                  Commonly Used: Encyclopedias, textbooks, Wikipedia
                  General Format Structure: Topic → Clear Definitions → Logical Sections → Summary
                `;
            } else {
                promptContent = `As a highly skilled human content editor and SEO specialist, your primary goal is to generate exceptional, unique, and human-like content for a webpage.
                The content must be engaging, unique, and indistinguishable from human writing to pass AI detectors (like Originality.ai or GPTZero).
                Focus on natural language, varied sentence structures, and a storytelling approach. Avoid any robotic or repetitive phrasing.
                **Content Requirements:**
                - **Topic/Information:** "${topic}"
                ${articleTitle ? `- **Main Article Title (H1):** "${articleTitle}"` : ''}
                - **Approximate Word Count:** Generate content around ${targetWordCount} words, within the range of ${wordCountRange}.
                - **Keywords (Primary & LSI):** Integrate "${keywords}" naturally throughout the content.
                Ensure primary keywords appear within the first 100 words and in relevant subheadings. Avoid keyword stuffing.
                - **Content Format:** Structure the content as a "${selectedContentFormat}".
                - **Writing Style & Tone:** Adopt a "${selectedWritingStyleTone}" tone, which means: ${styleDescription}. Follow this general structure: ${styleStructure}.
                - **Paragraphs:** Keep paragraphs short (2-3 lines maximum) for improved readability.
                - **Voice:** Use active voice predominantly.
                - **Transitions:** Ensure smooth and logical transitions between all sections and paragraphs.
                - **Engagement:** Incorporate hook-style introductions, reader-friendly language, and consider including optional questions to the reader or relevant anecdotes.
                **SEO & Linking Strategy:**
                - **Hyperlinks:** Strategically use hyperlinks, especially internal links, for SEO.
                - **Relevant Anchor Text:** Use descriptive, keyword-rich anchor text (e.g., "explore our web development services") for all links.
                Avoid generic phrases like "click here." Vary anchor text naturally.
                - **Strategic Placement:** Prioritize placing internal links within the first 100 words and throughout the main content.
                - **Topic Clusters:** If applicable, demonstrate the concept of pillar pages and cluster content through internal linking.
                - **Link Density:** Maintain a "${selectedLinkDensity}" link density level.
                ${externalLinks ? `- **External Links:** It is crucial to incorporate the following external links naturally into the content. For each link, create a relevant anchor text that fits the surrounding paragraph. Use Markdown format [Anchor Text](URL): ${externalLinks.split('\n').map(link => link.trim()).join(', ')}` : ''}

                **Formatting & Output:**
                - **Output Format:** Strictly format the entire output in **Markdown**. Use Markdown for headings (H1, H2, H3), paragraphs, bolding, lists, and **all links (e.g., [Anchor Text](URL))**.
                - **Meta Description:** At the very end of the content, include a compelling meta description (150-160 characters), clearly labeled as "Meta Description:", which is keyword-rich and engaging.
                `;
            }

            if (topic.toLowerCase() !== "show writing styles and tones" && (!topic || !keywords)) {
                outputEditor.textContent = 'Please provide a topic/info and keywords to generate content.';
                outputEditor.style.color = '#dc2626';
                updateProgressBar(0, 'Error: Missing topic or keywords.');
                generateButton.disabled = false;
                // Add error class to loading indicator to turn spinner red
                loadingIndicator.classList.add('error');
                return;
            } else {
                outputEditor.style.color = '';
            }

            // --- 🚀 API CONFIGURATION 🚀 ---
            // IMPORTANT: Keep apiKey empty. Canvas will automatically provide the correct API key at runtime.
            const apiKey = "AIzaSyDBFU7v6zExnHShkYUxkE6x6Fzk4O1ELrE"; 
            const apiUrl = "https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=" + apiKey;
            
            const apiHeaders = {
                "Content-Type": "application/json"
            };

            // Log API details for debugging
            console.log("Using API Key:", apiKey ? "Provided by Canvas" : "Empty (Canvas should inject)");
            console.log("Calling API URL:", apiUrl);
            // --- END API CONFIGURATION ---

            try {
                // Step 1: Generate initial content
                updateProgressBar(10, 'Generating initial content...');
                animateProgressBar(10, 45, 3000, 'Generating initial content...'); // Animate to 45% over 3 seconds

                const generationPayload = {
                    contents: [{ role: "user", parts: [{ text: promptContent }] }]
                };

                const generationResponse = await fetch(apiUrl, {
                    method: 'POST',
                    headers: apiHeaders,
                    body: JSON.stringify(generationPayload)
                });
                
                const generationResult = await generationResponse.json();

                let generatedMarkdown = '';
                if (generationResult.candidates && generationResult.candidates.length > 0 && generationResult.candidates[0].content && generationResult.candidates[0].content.parts && generationResult.candidates[0].content.parts.length > 0) {
                    generatedMarkdown = generationResult.candidates[0].content.parts[0].text;
                } else if (generationResult.error && generationResult.error.message) {
                    throw new Error(`Generation API Error: ${generationResult.error.message}`);
                } else {
                    throw new Error('Unexpected API response during content generation.');
                }

                // Step 2: Humanize the generated content
                updateProgressBar(55, 'Humanizing content...');
                animateProgressBar(55, 95, 3000, 'Humanizing content...'); // Animate to 95% over 3 seconds

                const humanizePrompt = `Rewrite the following text to sound more natural, human-like, and less detectable by AI content detectors.
                Focus on varying sentence structures, using a diverse vocabulary, incorporating natural flow, and adding elements of human expression (e.g., subtle anecdotes, rhetorical questions, or a more conversational tone) without altering the core meaning or factual accuracy.
                Ensure the output is still optimized for SEO, maintaining keyword relevance and heading structure where appropriate.
                The output should be in Markdown format.

                Original Text to Humanize:
                \`\`\`
                ${generatedMarkdown}
                \`\`\`
                `;

                const humanizationPayload = {
                    contents: [{ role: "user", parts: [{ text: humanizePrompt }] }]
                };

                const humanizationResponse = await fetch(apiUrl, {
                    method: 'POST',
                    headers: apiHeaders,
                    body: JSON.stringify(humanizationPayload)
                });
                
                const humanizationResult = await humanizationResponse.json();

                let finalMarkdown = '';
                if (humanizationResult.candidates && humanizationResult.candidates.length > 0 && humanizationResult.candidates[0].content && humanizationResult.candidates[0].content.parts && humanizationResult.candidates[0].content.parts.length > 0) {
                    finalMarkdown = humanizationResult.candidates[0].content.parts[0].text;
                } else if (humanizationResult.error && humanizationResult.error.message) {
                    throw new Error(`Humanization API Error: ${humanizationResult.error.message}`);
                } else {
                    throw new Error('Unexpected API response during humanization.');
                }

                // Display final content
                outputEditor.innerHTML = markdownToHtml(finalMarkdown);
                editorControlsContainer.classList.remove('hidden');
                updateProgressBar(100, 'Content ready!');
                // Ensure spinner is normal color on success
                loadingIndicator.classList.remove('error');
            } catch (error) {
                outputEditor.textContent = `An error occurred. Please try again.`; // Simplified error message for UI
                outputEditor.style.color = '#dc2626';
                console.error('DeepSEO Process Error:', error); // Log full error to console for debugging
                updateProgressBar(0, 'Error: Generation failed.');
                // Add error class to loading indicator to turn spinner red
                loadingIndicator.classList.add('error');
            } finally {
                generateButton.disabled = false;
                // Enable and show copy/share buttons only if content was successfully generated and displayed
                if (outputEditor.textContent && outputEditor.textContent !== 'Your generated DeepSEO content will appear here and can be edited.' && outputEditor.style.color !== 'rgb(220, 38, 38)') {
                    copyButton.disabled = false;
                    shareButton.disabled = false;
                    copyButton.style.display = 'inline-block'; // Show copy button
                    shareButton.style.display = 'inline-block'; // Show share button
                } else {
                    copyButton.disabled = true;
                    shareButton.disabled = true;
                    copyButton.style.display = 'none'; // Keep hidden on error
                    shareButton.style.display = 'none'; // Keep hidden on error
                }
            }
        }

        // Add event listener for word length select to update hidden input
        wordLengthSelect.addEventListener('change', (event) => {
            const selectedValue = event.target.value;
            wordLimitHidden.value = wordLengthMap[selectedValue].target;
        });

        // Add event listener to the generate button
        generateButton.addEventListener('click', generateDeepSEOContent);
        // --- Copy Button Logic ---
        copyButton.addEventListener('click', () => {
            try {
                const range = document.createRange();
                range.selectNodeContents(outputEditor);
                const selection = window.getSelection();
                selection.removeAllRanges();
                selection.addRange(range);
                document.execCommand('copy');
                selection.removeAllRanges(); // Deselect the text
                showMessage('Content copied to clipboard!');
            } catch (err) {
                console.error('Failed to copy content: ', err);
                showMessage('Failed to copy content. Please try manually.');
            }
        });
        // --- End Copy Button Logic ---

        // --- Share Button Logic ---
        shareButton.addEventListener('click', () => {
            const contentToShare = outputEditor.innerText; // Get plain text for sharing
            if (!contentToShare.trim() || contentToShare.trim() === 'Your generated DeepSEO content will appear here and can be edited.') {
                showMessage('Generate some content first to share!');
                return;
            }
            shareModalOverlay.classList.add('show');
        });
        closeShareModalBtn.addEventListener('click', () => {
            shareModalOverlay.classList.remove('show');
        });
        shareModalOverlay.addEventListener('click', (event) => {
            // Close modal if clicking outside the content
            if (event.target === shareModalOverlay) {
                shareModalOverlay.classList.remove('show');
            }
        });
        shareOptions.forEach(option => {
            option.addEventListener('click', (event) => {
                const platform = event.currentTarget.dataset.platform;
                const content = outputEditor.innerText; // Get the text content for sharing
                const pageUrl = window.location.href; // URL of the current page

                let shareUrl = '';
                // Shorten content for social media shares if it's too long
                const truncatedContent = content.length > 200 ? content.substring(0, 197) + '...' : content;
                let shareText = encodeURIComponent(`Check out this DeepSEO content I generated: \n\n${truncatedContent} \n\nRead more at: ${pageUrl}`);
                let shareTitle = encodeURIComponent("DeepSEO Generated Content");

                switch (platform) {
                    case 'whatsapp':
                        shareUrl = `https://api.whatsapp.com/send?text=${shareText}`;
                        break;
                    case 'twitter':
                        shareUrl = `https://twitter.com/intent/tweet?text=${shareText}`;
                        break;
                    case 'linkedin':
                        // LinkedIn share requires a URL, content is optional
                        shareUrl = `https://www.linkedin.com/shareArticle?mini=true&url=${encodeURIComponent(pageUrl)}&title=${shareTitle}&summary=${shareText}`;
                        break;
                    case 'email':
                        shareUrl = `mailto:?subject=${shareTitle}&body=${shareText}`;
                        break;
                    default:
                        console.error('Unknown share platform:', platform);
                        return;
                }

                window.open(shareUrl, '_blank');
                shareModalOverlay.classList.remove('show'); // Close modal after sharing
            });
        });
        // --- End Share Button Logic ---


        // Initial setup on window load
        window.onload = () => {
            // Default Goyalstech information
            topicInput.value = "Digital Marketing Services for Businesses";
            articleTitleInput.value = "Boost Your Online Presence: The Power of Goyalstech Digital Marketing";
            keywordsInput.value = "digital marketing, SEO services, web development, online presence, Goyalstech, marketing solutions, website design";
            externalLinksInput.value = `https://goyalstech.com/
https://goyalstech.com/services/web-development
https://goyalstech.com/services/seo-optimization`;
            // Set default selections for new features
            wordLengthSelect.value = 'medium';
            wordLimitHidden.value = wordLengthMap['medium'].target;
            document.querySelector('input[name="content-format"][value="blog"]').checked = true;
            linkDensitySelect.value = 'normal';
            writingStyleToneSelect.value = 'Informative'; // Default to Informative

            // Disable and hide copy/share buttons initially as there's no generated content
            copyButton.disabled = true;
            shareButton.disabled = true;
            copyButton.style.display = 'none';
            shareButton.style.display = 'none';

            // Hide editor controls initially
            editorControlsContainer.classList.add('hidden');
            updateProgressBar(0, 'Ready to generate content.'); // Initial message for progress bar
            loadingIndicator.classList.add('hidden'); // Ensure hidden on load
        };
    </script>
</body>
</html>
